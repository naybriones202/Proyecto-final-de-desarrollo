<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sistema Escolar</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="./src/style.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  </head>
  <body>
    
    <div id="login-section" class="vh-100 d-flex align-items-center justify-content-center bg-login">
      <div class="card shadow-lg p-4 border-0 rounded-4" style="width: 400px;">
        <div class="text-center mb-4">
          <i class="bi bi-database-fill-gear text-primary display-1"></i>
          <h3 class="mt-3 fw-bold text-secondary">Acceso al Sistema</h3>
          <p class="text-muted small">Gestión de Bases de Datos Distribuidas</p>
        </div>
        <form id="form-login">
          <div class="form-floating mb-3">
            <input type="text" id="login-cedula" class="form-control" placeholder="Cédula" required>
            <label><i class="bi bi-person-badge"></i> Cédula</label>
          </div>
          <div class="form-floating mb-3">
            <input type="password" id="login-clave" class="form-control" placeholder="Clave" required>
            <label><i class="bi bi-key"></i> Contraseña</label>
          </div>
          <button type="submit" class="btn btn-primary w-100 py-2 fs-5 rounded-3 shadow-sm">
            Ingresar <i class="bi bi-box-arrow-in-right"></i>
          </button>
        </form>
      </div>
    </div>

    <div id="dashboard-section" class="d-flex w-100 h-100 oculto wrapper">
      
      <nav id="sidebar" class="bg-dark text-white p-3 d-flex flex-column" style="width: 260px; min-height: 100vh;">
        <div class="d-flex align-items-center mb-4 px-2">
          <i class="bi bi-layers-fill fs-3 text-warning me-2"></i>
          <span class="fs-4 fw-bold">Bienvenido</span>
        </div>
        <hr class="text-secondary">
        
        <ul class="nav nav-pills flex-column mb-auto">
          <li class="nav-item mb-2">
            <button class="nav-link active text-white w-100 text-start" id="btn-nav-usuarios" onclick="mostrarPanel('usuarios')">
              <i class="bi bi-people me-2"></i> Usuarios
            </button>
          </li>
          <li class="nav-item mb-2">
            <button class="nav-link text-white-50 w-100 text-start" id="btn-nav-materias" onclick="mostrarPanel('materias')">
              <i class="bi bi-book me-2"></i> Materias
            </button>
          </li>
          <li class="nav-item mb-2">
            <button class="nav-link text-white-50 w-100 text-start" id="btn-nav-estudiantes" onclick="mostrarPanel('estudiantes')">
              <i class="bi bi-mortarboard me-2"></i> Estudiantes
            </button>
          </li>
          <li class="nav-item mb-2">
            <button class="nav-link text-white-50 w-100 text-start" id="btn-nav-notas" onclick="mostrarPanel('notas')">
              <i class="bi bi-clipboard-check me-2"></i> Calificaciones
            </button>
          </li>
        </ul>
        
        <hr class="text-secondary">
        <div class="dropdown">
          <div class="d-flex align-items-center text-white text-decoration-none p-2 rounded hover-bg">
            <div class="rounded-circle bg-primary d-flex justify-content-center align-items-center me-2" style="width: 35px; height: 35px;">
              <i class="bi bi-person-fill"></i>
            </div>
            <strong id="usuario-logueado">Usuario</strong>
          </div>
          <button id="btn-logout" class="btn btn-outline-danger w-100 mt-2 btn-sm">
            <i class="bi bi-power"></i> Cerrar Sesión
          </button>
        </div>
      </nav>

      <div id="content" class="flex-grow-1 bg-light p-4 overflow-auto">
        
        <header class="mb-4 d-flex justify-content-between align-items-center">
          <h2 class="text-dark fw-bold" id="titulo-seccion">Gestión de Usuarios</h2>
          <span class="badge bg-success rounded-pill px-3 py-2 shadow-sm">
            <i class="bi bi-wifi"></i> Conectado al Servidor
          </span>
        </header>

        <div id="panel-usuarios" class="fade-in">
          <div class="row g-4">
            <div class="col-lg-4">
              <div class="card border-0 shadow-sm rounded-4">
                <div class="card-header bg-white border-0 pt-4 px-4">
                  <h5 class="fw-bold text-primary" id="titulo-form-usuario"><i class="bi bi-person-plus"></i> Nuevo Usuario</h5>
                </div>
                <div class="card-body px-4 pb-4">
                  <form id="form-usuario">
                    <input type="hidden" id="user-id">
                    <div class="mb-3">
                      <label class="form-label small text-muted">Cédula de Identidad</label>
                      <input type="text" id="user-cedula" class="form-control bg-light border-0" required>
                    </div>
                    <div class="mb-3">
                      <label class="form-label small text-muted">Nombre Completo</label>
                      <input type="text" id="user-nombre" class="form-control bg-light border-0" required>
                    </div>
                    <div class="mb-3">
                      <label class="form-label small text-muted">Contraseña</label>
                      <input type="text" id="user-clave" class="form-control bg-light border-0" required>
                    </div>
                    <div class="d-grid gap-2">
                      <button type="submit" class="btn btn-primary rounded-3">Guardar</button>
                      <button type="button" class="btn btn-light text-muted rounded-3" onclick="limpiarFormUsuario()">Cancelar</button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
            <div class="col-lg-8">
              <div class="card border-0 shadow-sm rounded-4 h-100">
                <div class="card-body p-0 overflow-hidden rounded-4">
                  <table class="table table-hover mb-0 align-middle">
                    <thead class="bg-light">
                      <tr>
                        <th class="py-3 ps-4">ID</th>
                        <th class="py-3">Cédula</th>
                        <th class="py-3">Nombre</th>
                        <th class="py-3 text-end pe-4">Acciones</th>
                      </tr>
                    </thead>
                    <tbody id="tabla-usuarios-body"></tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div id="panel-materias" class="fade-in oculto">
          <div class="row g-4">
            <div class="col-lg-4">
              <div class="card border-0 shadow-sm rounded-4">
                <div class="card-header bg-white border-0 pt-4 px-4">
                  <h5 class="fw-bold text-info" id="titulo-form-materia"><i class="bi bi-book-half"></i> Nueva Materia</h5>
                </div>
                <div class="card-body px-4 pb-4">
                  <form id="form-materia">
                    <input type="hidden" id="materia-id">
                    <div class="mb-3">
                      <label class="form-label small text-muted">Código Materia</label>
                      <input type="text" id="materia-codigo" class="form-control bg-light border-0" placeholder="Ej: SIS-101" required>
                    </div>
                    <div class="mb-3">
                      <label class="form-label small text-muted">Nombre Asignatura</label>
                      <input type="text" id="materia-nombre" class="form-control bg-light border-0" required>
                    </div>
                    <div class="d-grid gap-2">
                      <button type="submit" class="btn btn-info text-white rounded-3">Guardar</button>
                      <button type="button" class="btn btn-light text-muted rounded-3" onclick="limpiarFormMateria()">Cancelar</button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
            <div class="col-lg-8">
              <div class="card border-0 shadow-sm rounded-4 h-100">
                <div class="card-body p-0 overflow-hidden rounded-4">
                  <table class="table table-hover mb-0 align-middle">
                    <thead class="bg-light">
                      <tr>
                        <th class="py-3 ps-4">ID</th>
                        <th class="py-3">Código</th>
                        <th class="py-3">Materia</th>
                        <th class="py-3 text-end pe-4">Acciones</th>
                      </tr>
                    </thead>
                    <tbody id="tabla-materias-body"></tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div id="panel-estudiantes" class="fade-in oculto">
          <div class="row g-4">
            <div class="col-lg-4">
              <div class="card border-0 shadow-sm rounded-4">
                <div class="card-header bg-white border-0 pt-4 px-4">
                  <h5 class="fw-bold text-success"><i class="bi bi-person-badge-fill"></i> Nuevo Estudiante</h5>
                </div>
                <div class="card-body px-4 pb-4">
                  <form id="form-estudiante">
                    <div class="mb-3">
                      <label class="form-label small text-muted">Cédula</label>
                      <input type="text" id="est-cedula" class="form-control bg-light border-0" required>
                    </div>
                    <div class="mb-3">
                      <label class="form-label small text-muted">Nombre Completo</label>
                      <input type="text" id="est-nombre" class="form-control bg-light border-0" required>
                    </div>
                    <div class="d-grid gap-2">
                      <button type="submit" class="btn btn-success rounded-3">Guardar Estudiante</button>
                      <button type="button" class="btn btn-light text-muted rounded-3" onclick="limpiarFormEstudiante()">Cancelar</button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
            <div class="col-lg-8">
              <div class="card border-0 shadow-sm rounded-4 h-100">
                <div class="card-body p-0 overflow-hidden rounded-4">
                  <table class="table table-hover mb-0 align-middle">
                    <thead class="bg-light">
                      <tr>
                        <th class="py-3 ps-4">ID</th>
                        <th class="py-3">Cédula</th>
                        <th class="py-3">Nombre</th>
                        <th class="py-3 text-end pe-4">Acciones</th>
                      </tr>
                    </thead>
                    <tbody id="tabla-estudiantes-body"></tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div id="panel-notas" class="fade-in oculto">
          <div class="row g-4">
            <div class="col-lg-4">
              <div class="card border-0 shadow-sm rounded-4">
                <div class="card-header bg-white border-0 pt-4 px-4">
                  <h5 class="fw-bold text-warning"><i class="bi bi-pencil-square"></i> Asignar Calificación</h5>
                </div>
                <div class="card-body px-4 pb-4">
                  <form id="form-notas">
                    <div class="mb-3">
                      <label class="form-label small text-muted">Estudiante</label>
                      <select id="nota-estudiante" class="form-select bg-light border-0" required>
                        <option value="">Cargando...</option>
                      </select>
                    </div>
                    <div class="mb-3">
                      <label class="form-label small text-muted">Materia</label>
                      <select id="nota-materia" class="form-select bg-light border-0" required>
                        <option value="">Cargando...</option>
                      </select>
                    </div>
                    <div class="mb-3">
                      <label class="form-label small text-muted">Nota (0 - 10)</label>
                      <input type="number" id="nota-valor" step="0.01" min="0" max="10" class="form-control bg-light border-0" required>
                    </div>
                    <div class="d-grid gap-2">
                      <button type="submit" class="btn btn-warning rounded-3 fw-bold">Guardar Nota</button>
                      <button type="button" class="btn btn-light text-muted rounded-3" onclick="limpiarFormNotas()">Cancelar</button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
            <div class="col-lg-8">
              <div class="card border-0 shadow-sm rounded-4 h-100">
                <div class="card-body p-0 overflow-hidden rounded-4">
                  <table class="table table-hover mb-0 align-middle">
                    <thead class="bg-light">
                      <tr>
                        <th class="py-3 ps-4">Estudiante</th>
                        <th class="py-3">Materia</th>
                        <th class="py-3">Nota</th>
                        <th class="py-3 text-end pe-4">Acciones</th>
                      </tr>
                    </thead>
                    <tbody id="tabla-notas-body"></tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>

    <script type="module" src="./src/main.js"></script>
  </body>
</html>